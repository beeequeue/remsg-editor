import{h as ot,C as zt,j as lt,k as Xt,m as Gt}from"./vendor-CEDgS92X.js";import{p as ct,s as Kt,a as l,b as Qt,l as ne,c as ut,i as dt,d as R,t as p,e as _,f as ft,g as Y,h as O,j as Q,k as Yt,m as Zt,n as i,$ as nt,o as Me,q as at,r as H,u as X,v as J,w as n,x as U,y as $t,z as el,A as fe,B as Ve,C as st,D as tl,E as it,F as G,G as ee,H as ll,I as C,J as nl,K as ke,L as Ne,M as v,N as le,O as K,P as al,Q as sl,R as il,S as W}from"./svelte-BbASWu8j.js";var rl=Y("<span><!></span>");function ol(w,t){ct(t,!1);const T=Kt(),g=()=>Yt(we,"$store",T);let M=l(t,"wiggle",12,!1),E=l(t,"angle",8,0),k=l(t,"scale",8,1),_e=l(t,"dx",8,0),be=l(t,"dy",8,0),ye=l(t,"duration",8,200),Ie=l(t,"stiffness",8,.05),Ae=l(t,"damping",8,.1),I={angle:0,scale:1,dx:0,dy:0},we=Qt(I,{stiffness:Ie(),damping:Ae()});ne(()=>(O(M()),O(ye())),()=>{M()&&setTimeout(()=>M(!1),ye())}),ne(()=>(O(M()),O(k()),O(E()),O(_e()),O(be())),()=>{we.set(M()?{scale:k(),angle:E(),dx:_e(),dy:be()}:I)}),ut(),dt();var ge=rl(),ae=Q(ge);R(ae,t,"default",{},null),p(()=>ot(ge,"transform",`rotate(${g().angle??""}deg) scale(${g().scale??""}) translate(${g().dx??""}px,
  ${g().dy??""}px)`)),_(w,ge),ft()}const D=w=>w instanceof Object?(w.label===void 0&&console.error(`MultiSelect option ${JSON.stringify(w)} is an object but has no label key`),w.label):`${w}`;function rt(w,t=null){let T="";if(["selected","option",null].includes(t)||console.error(`MultiSelect: Invalid key=${t} for get_style`),typeof w=="object"&&w.style&&(typeof w.style=="string"&&(T=w.style),typeof w.style=="object")){if(t&&t in w.style)return w.style[t]??"";console.error(`Invalid style object for option=${JSON.stringify(w)}`)}return T.trim()&&!T.trim().endsWith(";")&&(T+=";"),T}var cl=Y('<button type="button" class="remove svelte-1r2hsto"><!></button>'),ul=Y('<li role="option" aria-selected="true"><!> <!></li>'),dl=Y("<span> </span>"),fl=Y('<button type="button" class="remove remove-all svelte-1r2hsto"><!></button>'),gl=Y("<!> <!>",1),ml=Y('<li role="option" aria-selected="false"><!></li>'),hl=Y('<li role="option" aria-selected="false"><!></li>'),vl=Y('<ul role="listbox"><!> <!></ul>'),_l=Y('<div role="searchbox" tabindex="-1"><input tabindex="-1" aria-hidden="true" aria-label="ignore this, used only to prevent form submission if select is required but empty" class="form-control svelte-1r2hsto"> <!> <ul aria-label="selected options"><!> <input> <!></ul> <!> <!> <!></div>');function Sl(w,t){ct(t,!1);const T=fe();let g=l(t,"activeIndex",12,null),M=l(t,"activeOption",12,null),E=l(t,"createOptionMsg",24,()=>"Create this option..."),k=l(t,"allowUserOptions",8,!1),_e=l(t,"allowEmpty",8,!1),be=l(t,"autocomplete",24,()=>"off"),ye=l(t,"autoScroll",8,!0),Ie=l(t,"breakpoint",8,800),Ae=l(t,"defaultDisabledTitle",24,()=>"This option is disabled"),I=l(t,"disabled",8,!1),we=l(t,"disabledInputTitle",24,()=>"This input is disabled"),ge=l(t,"duplicateOptionMsg",24,()=>"This option is already selected"),ae=l(t,"duplicates",8,!1),Z=l(t,"key",8,e=>`${D(e)}`.toLowerCase()),Pe=l(t,"filterFunc",8,(e,a)=>a?`${D(e)}`.toLowerCase().includes(a.toLowerCase()):!0),Be=l(t,"closeDropdownOnSelect",24,()=>"desktop"),se=l(t,"form_input",12,null),gt=l(t,"highlightMatches",8,!0),De=l(t,"id",8,null),me=l(t,"input",12,null),mt=l(t,"inputClass",24,()=>""),ht=l(t,"inputStyle",8,null),vt=l(t,"inputmode",8,null),ce=l(t,"invalid",12,!1),_t=l(t,"liActiveOptionClass",24,()=>""),bt=l(t,"liActiveUserMsgClass",24,()=>""),yt=l(t,"liOptionClass",24,()=>""),wt=l(t,"liOptionStyle",8,null),St=l(t,"liSelectedClass",24,()=>""),xt=l(t,"liSelectedStyle",8,null),Ot=l(t,"liUserMsgClass",24,()=>""),He=l(t,"loading",8,!1),F=l(t,"matchingOptions",28,()=>[]),ue=l(t,"maxOptions",8,void 0),f=l(t,"maxSelect",8,null),Je=l(t,"maxSelectMsg",8,(e,a)=>a>1?`${e}/${a}`:""),Ct=l(t,"maxSelectMsgClass",24,()=>""),pt=l(t,"name",8,null),Se=l(t,"noMatchingOptionsMsg",24,()=>"No matching options"),ie=l(t,"open",12,!1),L=l(t,"options",12),xe=l(t,"outerDiv",12,null),Tt=l(t,"outerDivClass",24,()=>""),Ee=l(t,"parseLabelsAsHtml",8,!1),Mt=l(t,"pattern",8,null),We=l(t,"placeholder",8,null),kt=l(t,"removeAllTitle",24,()=>"Remove all"),Nt=l(t,"removeBtnTitle",24,()=>"Remove"),ze=l(t,"minSelect",8,null),j=l(t,"required",8,!1),It=l(t,"resetFilterOnAdd",8,!0),y=l(t,"searchText",28,()=>""),s=l(t,"selected",28,()=>L()?.filter(e=>e instanceof Object&&e?.preselected).slice(0,f()??void 0)??[]),he=l(t,"sortSelected",8,!1),Xe=l(t,"selectedOptionsDraggable",24,()=>!he()),At=l(t,"style",8,null),Dt=l(t,"ulOptionsClass",24,()=>""),Et=l(t,"ulSelectedClass",24,()=>""),Ft=l(t,"ulSelectedStyle",8,null),Lt=l(t,"ulOptionsStyle",8,null),Fe=l(t,"value",12,null);const jt=e=>{Fe(f()===1?e[0]??null:e)},qt=e=>{f()===1?s(e?[e]:[]):s(e??[])};let Le=fe(!1);L()?.length>0||(k()||He()||I()||_e()?L([]):console.error("MultiSelect received no options")),f()!==null&&f()<1&&console.error(`MultiSelect's maxSelect must be null or positive integer, got ${f()}`),Array.isArray(s())||console.error(`MultiSelect's selected prop should always be an array, got ${s()}`),f()&&typeof j()=="number"&&j()>f()&&console.error(`MultiSelect maxSelect=${f()} < required=${j()}, makes it impossible for users to submit a valid form`),Ee()&&k()&&console.warn("Don't combine parseLabelsAsHtml and allowUserOptions. It's susceptible to XSS attacks!"),he()&&Xe()&&console.warn("MultiSelect's sortSelected and selectedOptionsDraggable should not be combined as any user re-orderings of selected options will be undone by sortSelected on component re-renders."),k()&&!E()&&E()!==null&&console.error(`MultiSelect has allowUserOptions=${k()} but createOptionMsg=${E()} is falsy. This prevents the "Add option" <span> from showing up, resulting in a confusing user experience.`),ue()&&(typeof ue()!="number"||ue()<0||ue()%1!=0)&&console.error(`MultiSelect's maxOptions must be undefined or a positive integer, got ${ue()}`);const $=Zt();let te=fe(!1),Ge=fe();if(g()!==null&&!F()[g()])throw`Run time error, activeIndex=${g()} is out of bounds, matchingOptions.length=${F().length}`;function Oe(e,a){f()&&f()>1&&s().length>=f()&&U(Le,!0),!isNaN(Number(e))&&typeof s().map(D)[0]=="number"&&(e=Number(e));const r=s().map(Z()).includes(Z()(e));if((f()===null||f()===1||s().length<f())&&(ae()||!r)){if(!L().includes(e)&&[!0,"append"].includes(k())&&y().length>0&&(typeof L()[0]=="object"?e={label:y()}:(["number","undefined"].includes(typeof L()[0])&&!isNaN(Number(y()))?e=Number(y()):e=y(),$("create",{option:e})),k()==="append"&&L([...L(),e])),It()&&y(""),["",void 0,null].includes(e)){console.error(`MultiSelect: encountered falsy option ${e}`);return}f()===1?s([e]):(s([...s(),e]),he()===!0?s(s().sort((N,h)=>{const[S,c]=[D(N),D(h)];return`${S}`.localeCompare(`${c}`)})):typeof he()=="function"&&s(s().sort(he())));const o=s().length===f(),A=Be()===!0||Be()==="desktop"&&n(Ge)<Ie();o||A?je(a):A||me()?.focus(),$("add",{option:e}),$("change",{option:e,type:"add"}),ce(!1),se()?.setCustomValidity("")}}function Ce(e){if(s().length===0)return;const a=s().findIndex(o=>Z()(o)===Z()(e));let[r]=s().splice(a,1);if(r===void 0&&k()&&(r=typeof L()[0]?{label:e}:e),r===void 0)return console.error(`Multiselect can't remove selected option ${JSON.stringify(e)}, not found in selected list`);s([...s()]),ce(!1),se()?.setCustomValidity(""),$("remove",{option:r}),$("change",{option:r,type:"remove"})}function pe(e){I()||(ie(!0),e instanceof FocusEvent||me()?.focus(),$("open",{event:e}))}function je(e){ie(!1),me()?.blur(),g(null),$("close",{event:e})}async function Ut(e){if(e.key==="Escape"||e.key==="Tab")je(e),y("");else if(e.key==="Enter")e.preventDefault(),M()?(s().includes(M())?Ce(M()):Oe(M(),e),y("")):k()&&y().length>0?Oe(y(),e):pe(e);else if(["ArrowDown","ArrowUp"].includes(e.key)){if(g()===null&&F().length>0){g(0);return}else if(k()&&!F().length&&y().length>0){U(te,!n(te));return}else if(g()===null)return;e.preventDefault();const a=e.key==="ArrowUp"?-1:1;if(g((g()+a)%F().length),g()<0&&g(F().length-1),ye()){await il();const r=document.querySelector("ul.options > li.active");r&&r.scrollIntoViewIfNeeded?.()}}else e.key==="Backspace"&&s().length>0&&!y()?Ce(s().at(-1)):F().length>0&&g(0)}function Ke(){$("removeAll",{options:s()}),$("change",{options:s(),type:"removeAll"}),s([]),y("")}const Qe=e=>a=>{["Enter","Space"].includes(a.code)&&(a.preventDefault(),e())};function Ye(e){xe()&&!xe().contains(e.target)&&je(e)}let qe=fe(null);const Rt=e=>a=>{if(!a.dataTransfer)return;a.dataTransfer.dropEffect="move";const r=parseInt(a.dataTransfer.getData("text/plain")),o=[...s()];r<e?(o.splice(e+1,0,o[r]),o.splice(r,1)):(o.splice(e,0,o[r]),o.splice(r+1,1)),s(o),U(qe,null)},Vt=e=>a=>{a.dataTransfer&&(a.dataTransfer.effectAllowed="move",a.dataTransfer.dropEffect="move",a.dataTransfer.setData("text/plain",`${e}`))};let Ue=fe();function Pt(e){if(!gt()||typeof CSS>"u"||!CSS.highlights)return;CSS.highlights.clear();const a=e?.target?.value.trim().toLowerCase();if(!a)return;const r=document.createTreeWalker(n(Ue),NodeFilter.SHOW_TEXT,{acceptNode:h=>h?.textContent===Se()?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}),o=[];let A=r.nextNode();for(;A;)o.push(A),A=r.nextNode();const N=o.map(h=>{const S=h.textContent?.toLowerCase(),c=[];let d=0;for(;S&&d<S.length;){const m=S.indexOf(a,d);if(m===-1)break;c.push(m),d=m+a.length}return c.map(m=>{const x=new Range;return x.setStart(h,m),x.setEnd(h,m+a.length),x})});CSS.highlights.set("sms-search-matches",new Highlight(...N.flat()))}ne(()=>O(s()),()=>{jt(s())}),ne(()=>O(Fe()),()=>{qt(Fe())}),ne(()=>(O(L()),O(Pe()),O(y()),O(s()),O(Z()),O(ae())),()=>{F(L().filter(e=>Pe()(e,y())&&(!s().map(Z()).includes(Z()(e))||ae())))}),ne(()=>(O(F()),O(g())),()=>{M(F()[g()??-1]??null)}),ne(()=>(O(s()),D),()=>{U(T,e=>s().map(D).includes(e))}),ne(()=>(O(j()),O(se())),()=>{j(),se()?.setCustomValidity("")}),ut(),dt();var q=_l();i("click",nt,Ye),i("touchstart",nt,Ye);var de=Q(q);p(()=>nl(de,s().length>=Number(j())?JSON.stringify(s()):null)),Me(de,e=>se(e),()=>se());var Ze=G(de,2);R(Ze,t,"expand-icon",{get open(){return ie()}},e=>{zt(e,{width:"15px",style:"min-width: 1em; padding: 0 1pt; cursor: pointer;"})});var Te=G(Ze,2),$e=Q(Te);at($e,11,s,(e,a)=>ae()?[Z()(e),a]:Z()(e),(e,a,r)=>{var o=ul(),A=ke(()=>Vt(n(r))),N=ke(()=>Rt(n(r)));const h=W(()=>`${rt(n(a),"selected")??""} ${xt()??""}`);var S=Q(o);R(S,t,"selected",{get option(){return n(a)},get idx(){return n(r)}},d=>{var m=X(),x=J(m);R(x,t,"default",{get option(){return n(a)},get idx(){return n(r)}},re=>{var z=X(),b=J(z);H(b,Ee,V=>{var P=X(),B=J(P);st(B,()=>D(n(a))),_(V,P)},V=>{var P=Ve();p(()=>Ne(P,D(n(a)))),_(V,P)}),_(re,z)}),_(d,m)});var c=G(S,2);H(c,()=>!I()&&(ze()===null||s().length>ze()),d=>{var m=cl(),x=ke(()=>Qe(()=>Ce(n(a))));p(()=>v(m,"title",`${Nt()??""} ${D(n(a))??""}`));var re=Q(m);R(re,t,"remove-icon",{},z=>{lt(z,{width:"15px"})}),i("mouseup",m,ee(()=>Ce(n(a)))),i("keydown",m,function(...z){n(x)?.apply(this,z)}),_(d,m)}),p(()=>{le(o,`${St()??""} svelte-1r2hsto`),v(o,"draggable",Xe()&&!I()&&s().length>1),v(o,"style",n(h)),K(o,"active",n(qe)===n(r))}),tl(o,()=>al,()=>({duration:100})),i("dragstart",o,function(...d){n(A)?.apply(this,d)}),i("drop",o,it(function(...d){n(N)?.apply(this,d)})),i("dragenter",o,()=>U(qe,n(r))),i("dragover",o,it(function(d){C.call(this,t,d)})),_(e,o)});var u=G($e,2);Me(u,e=>me(e),()=>me());var Bt=G(u,2);R(Bt,t,"after-input",{get selected(){return s()},get disabled(){return I()},get invalid(){return ce()},get id(){return De()},get placeholder(){return We()},get open(){return ie()},get required(){return j()}},null);var et=G(Te,2);H(et,He,e=>{var a=X(),r=J(a);R(r,t,"spinner",{},o=>{Gt(o,{})}),_(e,a)});var tt=G(et,2);H(tt,I,e=>{var a=X(),r=J(a);R(r,t,"disabled-icon",{},o=>{Xt(o,{width:"14pt",style:"margin: 0 2pt;","data-name":"disabled-icon"})}),_(e,a)},e=>{var a=X(),r=J(a);H(r,()=>s().length>0,o=>{var A=gl(),N=J(A);H(N,()=>f()&&(f()>1||Je()),S=>{ol(S,{get wiggle(){return n(Le)},set wiggle(c){U(Le,c)},angle:20,children:(c,d)=>{var m=dl(),x=Q(m);p(()=>Ne(x,Je()?.(s().length,f()))),p(()=>le(m,`max-select-msg ${Ct()??""} svelte-1r2hsto`)),_(c,m)},$$slots:{default:!0},$$legacy:!0})});var h=G(N,2);H(h,()=>f()!==1&&s().length>1,S=>{var c=fl(),d=ke(()=>Qe(Ke)),m=Q(c);R(m,t,"remove-icon",{},x=>{lt(x,{width:"15px"})}),p(()=>v(c,"title",kt())),i("mouseup",c,ee(Ke)),i("keydown",c,function(...x){n(d)?.apply(this,x)}),_(S,c)}),_(o,A)},null,!0),_(e,a)});var Ht=G(tt,2);H(Ht,()=>y()&&Se()||L()?.length>0,e=>{var a=vl(),r=Q(a);at(r,1,()=>F().slice(0,Math.max(0,ue()??0)||1/0),sl,(N,h,S)=>{var c=ml();const d=W(()=>{const{label:b,disabled:V=null,title:P=null,selectedTitle:B=null,disabledTitle:oe=Ae()}=n(h)instanceof Object?n(h):{label:n(h)};return{label:b,disabled:V,title:P,selectedTitle:B,disabledTitle:oe}}),m=W(()=>g()===S);p(()=>v(c,"title",n(d).disabled?n(d).disabledTitle:n(T)(n(d).label)&&n(d).selectedTitle||n(d).title));const x=W(()=>`${rt(n(h),"option")??""} ${wt()??""}`),re=W(()=>n(T)(n(d).label));var z=Q(c);R(z,t,"option",{get option(){return n(h)},idx:S},b=>{var V=X(),P=J(V);R(P,t,"default",{get option(){return n(h)},idx:S},B=>{var oe=X(),Jt=J(oe);H(Jt,Ee,Re=>{var ve=X(),Wt=J(ve);st(Wt,()=>D(n(h))),_(Re,ve)},Re=>{var ve=Ve();p(()=>Ne(ve,D(n(h)))),_(Re,ve)}),_(B,oe)}),_(b,V)}),p(()=>{le(c,`${yt()??""} ${(n(m)?_t():"")??""} svelte-1r2hsto`),v(c,"style",n(x)),K(c,"selected",n(re)),K(c,"active",n(m)),K(c,"disabled",n(d).disabled)}),i("mousedown",c,ee(function(b){C.call(this,t,b)})),i("mouseup",c,ee(b=>{n(d).disabled||Oe(n(h),b)})),i("mouseover",c,()=>{n(d).disabled||g(S)}),i("focus",c,()=>{n(d).disabled||g(S)}),i("mouseout",c,()=>g(null)),i("blur",c,()=>g(null)),_(N,c)});var A=G(r,2);H(A,y,N=>{var h=X();const S=W(()=>s().map(D).includes(y())),c=W(()=>!ae()&&n(S)&&"dupe"),d=W(()=>!!(k()&&E())&&"create"),m=W(()=>!!(F()?.length==0&&Se())&&"no-match"),x=W(()=>n(c)||n(d)||n(m));var re=J(h);H(re,()=>n(x),z=>{var b=hl();const V=W(()=>({dupe:ge(),create:E(),"no-match":Se()})[n(x)]);var P=Q(b);R(P,t,"user-msg",{get searchText(){return y()},get msgType(){return n(x)},get msg(){return n(V)}},B=>{var oe=Ve();p(()=>Ne(oe,n(V))),_(B,oe)}),p(()=>{v(b,"title",E()),le(b,`user-msg ${Ot()??""} ${(n(te)?bt():"")??""} svelte-1r2hsto`),K(b,"active",n(te)),ot(b,"cursor",{dupe:"not-allowed",create:"pointer","no-match":"default"}[n(x)])}),i("mousedown",b,ee(function(B){C.call(this,t,B)})),i("mouseup",b,ee(B=>{k()&&Oe(y(),B)})),i("mouseover",b,()=>U(te,!0)),i("focus",b,()=>U(te,!0)),i("mouseout",b,()=>U(te,!1)),i("blur",b,()=>U(te,!1)),_(z,b)}),_(N,h)}),Me(a,N=>U(Ue,N),()=>n(Ue)),p(()=>{le(a,`options ${Dt()??""} svelte-1r2hsto`),v(a,"aria-multiselectable",f()===null||f()>1),v(a,"aria-expanded",ie()),v(a,"aria-disabled",I()?"true":null),v(a,"style",Lt()),K(a,"hidden",!ie())}),_(e,a)}),Me(q,e=>xe(e),()=>xe()),p(()=>{le(q,`multiselect ${Tt()??""} svelte-1r2hsto`),v(q,"title",I()?we():null),v(q,"data-id",De()),v(q,"style",At()),K(q,"disabled",I()),K(q,"single",f()===1),K(q,"open",ie()),K(q,"invalid",ce()),v(de,"name",pt()),de.required=j(),le(Te,`selected ${Et()??""} svelte-1r2hsto`),v(Te,"style",Ft()),le(u,`${mt()??""} svelte-1r2hsto`),v(u,"style",ht()),v(u,"id",De()),u.disabled=I(),v(u,"autocomplete",be()),v(u,"inputmode",vt()),v(u,"pattern",Mt()),v(u,"placeholder",s().length==0?We():null),v(u,"aria-invalid",ce()?"true":null)}),$t("innerWidth",e=>U(Ge,e)),i("invalid",de,()=>{ce(!0);let e;f()&&f()>1&&Number(j())>1?e=`Please select between ${j()} and ${f()} options`:Number(j())>1?e=`Please select at least ${j()} options`:e="Please select an option",se()?.setCustomValidity(e)}),el(u,y),i("mouseup",u,ll(ee(pe))),i("keydown",u,ee(Ut)),i("focus",u,function(e){C.call(this,t,e)}),i("focus",u,pe),i("input",u,Pt),i("drop",u,()=>!1),i("blur",u,function(e){C.call(this,t,e)}),i("change",u,function(e){C.call(this,t,e)}),i("click",u,function(e){C.call(this,t,e)}),i("keydown",u,function(e){C.call(this,t,e)}),i("keyup",u,function(e){C.call(this,t,e)}),i("mousedown",u,function(e){C.call(this,t,e)}),i("mouseenter",u,function(e){C.call(this,t,e)}),i("mouseleave",u,function(e){C.call(this,t,e)}),i("touchcancel",u,function(e){C.call(this,t,e)}),i("touchend",u,function(e){C.call(this,t,e)}),i("touchmove",u,function(e){C.call(this,t,e)}),i("touchstart",u,function(e){C.call(this,t,e)}),i("mouseup",q,ee(pe)),_(w,q),ft()}function bl(w=!0){const t=this,T=new IntersectionObserver(function([g]){const M=g.intersectionRatio;if(M<1){const E=M<=0&&w?"center":"nearest";t.scrollIntoView({block:E,inline:E})}this.disconnect()});return T.observe(t),T}typeof Element<"u"&&!Element.prototype?.scrollIntoViewIfNeeded&&typeof IntersectionObserver<"u"&&(Element.prototype.scrollIntoViewIfNeeded=bl);export{Sl as M};
